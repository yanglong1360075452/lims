webpackJsonp([8],{329:function(e,t,a){function r(e){a(437)}var i=a(4)(a(407),a(461),r,null,null);e.exports=i.exports},338:function(e,t,a){e.exports={default:a(340),__esModule:!0}},339:function(e,t,a){"use strict";t.__esModule=!0;var r=a(338),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t,a){return t in e?(0,i.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},340:function(e,t,a){a(341);var r=a(9).Object;e.exports=function(e,t,a){return r.defineProperty(e,t,a)}},341:function(e,t,a){var r=a(26);r(r.S+r.F*!a(10),"Object",{defineProperty:a(11).f})},407:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(339),i=a.n(r),o=a(61),n=a(110);t.default={props:{type:{type:Number,require:!0}},beforeCreate:function(){this.temp={},this.tableDataTemp={}},mounted:function(){this.getUserList()},data:function(){var e,t=this;return e={totalCount:0,currentPage:1,pageSize:10,pageSizes:[10,20,30,40],checkAll:!1,dialogFormVisible:!1,resetPassword:!1,reset:{pass:"",checkPass:""},resetRule:{pass:[{validator:function(e,a,r){""===a?r(new Error("请输入密码")):(""!==t.reset.checkPass&&t.$refs.reset.validateField("checkPass"),r())},trigger:"blur"}],checkPass:[{validator:function(e,a,r){""===a?r(new Error("请再次输入密码")):a!==t.reset.pass?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}]},visible2:!1,ifEdit:!1,ifTableEdit:!1,dialogType:1,seachSel:"",seachSelect:"",userDataList:[],checkedroles:[],roles:[],ids:[],user:{id:null,username:null,password:null,phone:null,nickname:null,note:null,status:null,department:null,position:null,roles:null},checked:[],dialogFormData:{},listIndex:"",listQuery:{page:1,limit:10}},i()(e,"currentPage",1),i()(e,"defaultProps",{children:"children",label:"label"}),i()(e,"formLabelWidth","120px"),e},methods:{add:function(){this.dialogFormVisible=!0,this.getAppRoles()},edit:function(e){if(this.dialogFormVisible=!0,this.getAppRoles(),null!=e){this.user=e;for(var t=0;t<e.roles.length;t++)this.checkedroles.push(e.roles[t].id)}},deleteUser:function(){for(var e=this,t=this.userDataList.filter(function(e){return e.checked}),a=0;a<t.length;a++)1==t[a].id?(e.getUserList(),e.$message({type:"error",message:"超级管理员不能禁用"})):o.a.updateStatus(t[a].id).then(function(t){e.getUserList(),0==t.code?(e.$message({type:"success",message:"用户状态更新成功"}),e.getUserList()):e.$message({type:"error",message:"用户状态更新失败"})})},getAppRoles:function(){var e=this;n.a.getRoleList({page:1,length:1e3}).then(function(t){0==t.code&&(e.roles=t.data.rows)})},handleCurrentChange:function(e){this.currentPage=e,this.getUserList()},sizeChange:function(e){this.pageSize=e,this.getUserList()},getUserList:function(){var e=this;setTimeout(function(){var t=e;o.a.getList({page:t.currentPage,length:t.pageSize}).then(function(e){0==e.code?(t.userDataList=e.data.rows,t.totalPage=e.totalPage,t.totalCount=e.data.totalCount):t.$message({type:"error",message:e.reason})})},300)},submitForm1:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({type:"error",message:"密码修改失败"}),!1;var a={id:t.user.id,password:t.reset.pass},r=t;o.a.resetPassword(a).then(function(e){0==e.code?(r.$message({type:"success",message:"密码修改成功"}),r.restPassCancle()):r.$message({type:"error",message:e.reason})})})},submit:function(){var e=this;e.user.roles=e.checkedroles,null==e.user.id?""!=e.user.username&&null!=e.user.username?o.a.getByName(e.user.username).then(function(t){0==t.code&&(void 0!=t.data&&void 0!=t.data.username?e.$message({type:"error",message:"创建用户失败!用户名已存在"}):o.a.create(e.user).then(function(t){0==t.code?(e.$message({type:"success",message:"创建用户成功"}),e.cancle(),e.getUserList()):e.$message({type:"error",message:"创建用户失败"}),e.cancle(),e.getUserList()}))}):e.$message({type:"error",message:"创建用户失败!请输入用户名"}):o.a.update(e.user).then(function(t){0==t.code?(e.$message({type:"success",message:"编辑用户成功"}),e.cancle(),e.getUserList()):e.$message({type:"error",message:t.reason})})},restPassCancle:function(){var e=this;e.resetPassword=!1,e.reset.pass="",e.reset.checkPass=""},cancle:function(){this.ifEdit=!1,this.dialogFormVisible=!1,this.user={roles:[],username:null,password:null,phone:null,nickname:null,department:null,position:null,note:null},this.checkedroles=[]},confirm:function(){this.ifEdit=!1},tableEdit:function(){this.ifTableEdit=!0},tableCancle:function(){this.ifTableEdit=!1},handleRemove:function(e,t){},changeState:function(){var e=this,t=this,a=this.checkAll;this.userDataList.forEach(function(r){e.$set(r,"checked",a),r.checked=a,(r.checked=a)&&t.ids.push(r.id),console.log(r.checked+"*******"+r.id)})},singleSelect:function(){}},editCancle:function(){this.dialogFormData=this.tableDataTemp,console.log(this.dialogFormData,"this.dialogFormData"),this.dialogFormVisible=!1},editDo:function(){this.dialogFormVisible=!1},filters:{formatDate:function(e){var t=new Date(e);return parseTime(t,"{y}-{m}-{d}")}}}},421:function(e,t,a){t=e.exports=a(301)(!0),t.push([e.i,".seachpre{width:74px}.editWrapper{float:right}.editWrapper .edit{width:76px;padding:7px 15px;color:#5c7dfe;border:1px solid #5c7dfe}.filter-item{width:100px;height:36px;margin-left:20px;border:1px solid #5c7dfe;border-radius:4px!important}.buttonWrapper{font-size:12px;float:right}.buttonWrapper .cancle,.buttonWrapper .confirm{width:76px;padding:7px 15px}.buttonWrapper .confirm{color:#5c7dfe;border:1px solid #5c7dfe}.buttonWrapper .cancle{color:#f55f80;border:1px solid #f55f80}.tableEditWrapper{float:right}.tableEditWrapper .edit{width:102px;padding:8px 15px;font-size:13px;color:#5c7dfe;border:1px solid #5c7dfe}.tableEditWrapper .cancle{width:102px;padding:8px 15px;font-size:13px;color:#f55f80;border:1px solid #f55f80}.el-dialog__body .el-date-editor,.el-dialog__body .el-input{width:360px!important}.el-pagination{text-align:right;padding:10px 0;float:right}.el-pagination__total,.upload-demo{float:left}.upload-demo .el-button{color:#5c7dfe;border-radius:0;background:none;border:1px solid #5c7dfe}.loadTemplate{color:#2f3445;background:none;border:1px solid #c0ccda!important}.leftReset{padding-right:20px!important}.rightTitle{height:50px;padding:18px 0 18px 10px;line-height:50px;box-sizing:border-box;background-color:#eff2f7}.rightTitle .form-group-title{margin:0}.table{color:#2f3445;font-size:13px;border:1px solid #e0e6ed}.table .thead{background-color:#e5e9f2}.table .thead th{width:130px;height:44px;text-align:center;border-right:1px solid #e0e6ed}.table .tbody tr{height:46px;width:130px;text-align:center;border-top:1px solid #e0e6ed}.table .tbody tr td{border-right:1px solid #e0e6ed}.table .tbody tr .modifyTrData{color:#5c7dfe}","",{version:3,sources:["D:/idea_workspace/lims/lims-client/src/views/page/system/user/users.vue"],names:[],mappings:"AACA,UACE,UAAY,CACb,AACD,aACE,WAAa,CACd,AACD,mBACI,WAAY,AACZ,iBAAkB,AAClB,cAAe,AACf,wBAA0B,CAC7B,AACD,aACE,YAAa,AACb,YAAa,AACb,iBAAkB,AAClB,yBAA0B,AAC1B,2BAA8B,CAC/B,AACD,eACE,eAAgB,AAChB,WAAa,CACd,AACD,+CAEI,WAAY,AACZ,gBAAkB,CACrB,AACD,wBACI,cAAe,AACf,wBAA0B,CAC7B,AACD,uBACI,cAAe,AACf,wBAA0B,CAC7B,AACD,kBACE,WAAa,CACd,AACD,wBACI,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,cAAe,AACf,wBAA0B,CAC7B,AACD,0BACI,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,cAAe,AACf,wBAA0B,CAC7B,AACD,4DAEE,qBAAwB,CACzB,AACD,eACE,iBAAkB,AAClB,eAAgB,AAChB,WAAa,CACd,AAID,mCACE,UAAY,CACb,AACD,wBACI,cAAe,AACf,gBAAmB,AACnB,gBAAiB,AACjB,wBAA0B,CAC7B,AACD,cACE,cAAe,AACf,gBAAiB,AACjB,kCAAqC,CACtC,AACD,WACE,4BAA+B,CAChC,AACD,YACE,YAAa,AACb,yBAA0B,AAC1B,iBAAkB,AAClB,sBAAuB,AACvB,wBAA0B,CAC3B,AACD,8BACI,QAAU,CACb,AACD,OACE,cAAe,AACf,eAAgB,AAChB,wBAA0B,CAC3B,AACD,cACI,wBAA0B,CAC7B,AACD,iBACM,YAAa,AACb,YAAa,AACb,kBAAmB,AACnB,8BAAgC,CACrC,AACD,iBACI,YAAa,AACb,YAAa,AACb,kBAAmB,AACnB,4BAA8B,CACjC,AACD,oBACM,8BAAgC,CACrC,AACD,+BACM,aAAe,CACpB",file:"users.vue",sourcesContent:["\n.seachpre {\n  width: 74px;\n}\n.editWrapper {\n  float: right;\n}\n.editWrapper .edit {\n    width: 76px;\n    padding: 7px 15px;\n    color: #5c7dfe;\n    border: 1px solid #5c7dfe;\n}\n.filter-item {\n  width: 100px;\n  height: 36px;\n  margin-left: 20px;\n  border: 1px solid #5c7dfe;\n  border-radius: 4px !important;\n}\n.buttonWrapper {\n  font-size: 12px;\n  float: right;\n}\n.buttonWrapper .confirm,\n  .buttonWrapper .cancle {\n    width: 76px;\n    padding: 7px 15px;\n}\n.buttonWrapper .confirm {\n    color: #5c7dfe;\n    border: 1px solid #5c7dfe;\n}\n.buttonWrapper .cancle {\n    color: #f55f80;\n    border: 1px solid #f55f80;\n}\n.tableEditWrapper {\n  float: right;\n}\n.tableEditWrapper .edit {\n    width: 102px;\n    padding: 8px 15px;\n    font-size: 13px;\n    color: #5c7dfe;\n    border: 1px solid #5c7dfe;\n}\n.tableEditWrapper .cancle {\n    width: 102px;\n    padding: 8px 15px;\n    font-size: 13px;\n    color: #f55f80;\n    border: 1px solid #f55f80;\n}\n.el-dialog__body .el-input,\n.el-dialog__body .el-date-editor {\n  width: 360px !important;\n}\n.el-pagination {\n  text-align: right;\n  padding: 10px 0;\n  float: right;\n}\n.el-pagination__total {\n  float: left;\n}\n.upload-demo {\n  float: left;\n}\n.upload-demo .el-button {\n    color: #5c7dfe;\n    border-radius: 0px;\n    background: none;\n    border: 1px solid #5c7dfe;\n}\n.loadTemplate {\n  color: #2f3445;\n  background: none;\n  border: solid 1px #c0ccda !important;\n}\n.leftReset {\n  padding-right: 20px !important;\n}\n.rightTitle {\n  height: 50px;\n  padding: 18px 0 18px 10px;\n  line-height: 50px;\n  box-sizing: border-box;\n  background-color: #eff2f7;\n}\n.rightTitle .form-group-title {\n    margin: 0;\n}\n.table {\n  color: #2f3445;\n  font-size: 13px;\n  border: 1px solid #e0e6ed;\n}\n.table .thead {\n    background-color: #e5e9f2;\n}\n.table .thead th {\n      width: 130px;\n      height: 44px;\n      text-align: center;\n      border-right: 1px solid #e0e6ed;\n}\n.table .tbody tr {\n    height: 46px;\n    width: 130px;\n    text-align: center;\n    border-top: 1px solid #e0e6ed;\n}\n.table .tbody tr td {\n      border-right: 1px solid #e0e6ed;\n}\n.table .tbody tr .modifyTrData {\n      color: #5c7dfe;\n}\n"],sourceRoot:""}])},437:function(e,t,a){var r=a(421);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(302)("69a6fdc0",r,!0)},461:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8,offset:12}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.ifTableEdit,expression:"!ifTableEdit"}],staticClass:"tableEditWrapper"},[a("el-button",{staticClass:"edit",attrs:{icon:"edit"},nativeOn:{click:function(t){e.tableEdit()}}},[e._v("编辑")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}],staticClass:"tableEditWrapper"},[a("el-button",{staticClass:"cancle",attrs:{icon:"edit"},nativeOn:{click:function(t){e.tableCancle()}}},[e._v("退出编辑")])],1)]),e._v(" "),a("el-col",{staticClass:"leftReset",attrs:{span:19}},[a("el-form",{ref:"form",attrs:{"label-position":"right","label-width":"120px"}},[a("el-row",{attrs:{type:"flex",align:"middle"}},[a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}],attrs:{span:14,offset:2}},[a("el-button-group",{staticStyle:{float:"right"}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"edit"},on:{click:function(t){e.add()}}},[e._v("新建用户")])],1)],1)],1),e._v(" "),a("table",{staticClass:"table"},[a("thead",{staticClass:"thead"},[a("tr",[a("th",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}]},[a("el-checkbox",{on:{change:function(t){e.changeState()}},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}})],1),e._v(" "),a("th",[e._v("用户ID")]),e._v(" "),a("th",[e._v("用户名")]),e._v(" "),a("th",[e._v("手机号码")]),e._v(" "),a("th",[e._v("用户昵称")]),e._v(" "),a("th",[e._v("部门")]),e._v(" "),a("th",[e._v("职位")]),e._v(" "),a("th",[e._v("角色列表")]),e._v(" "),a("th",[e._v("用户说明")]),e._v(" "),a("th",[e._v("状态")]),e._v(" "),a("th",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}]},[e._v("操作")])])]),e._v(" "),a("tbody",{staticClass:"tbody"},e._l(e.userDataList,function(t,r){return a("tr",[a("td",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}]},[a("el-checkbox",{on:{change:function(t){e.singleSelect()}},model:{value:t.checked,callback:function(e){t.checked=e},expression:"item.checked"}})],1),e._v(" "),a("td",[e._v(e._s(t.id))]),e._v(" "),a("td",[e._v(e._s(t.username))]),e._v(" "),a("td",[e._v(e._s(t.phone))]),e._v(" "),a("td",[e._v(e._s(t.nickname))]),e._v(" "),a("td",[e._v(e._s(t.department))]),e._v(" "),a("td",[e._v(e._s(t.position))]),e._v(" "),a("td",e._l(t.roles,function(t){return a("span",[e._v(e._s(t.name)+"  ")])})),e._v(" "),a("td",[e._v(e._s(t.note))]),e._v(" "),a("td",[e._v(e._s(0==t.status?"禁用":"激活"))]),e._v(" "),a("td",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}],staticClass:"modifyTrData",on:{click:function(a){e.edit(t)}}},[a("el-button",[e._v("修改")])],1)])}))]),e._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{type:"fix",align:"middle"}},[a("el-col",{attrs:{span:8}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}],on:{click:e.deleteUser}},[e._v("删除")])],1),e._v(" "),a("el-col",{staticStyle:{float:"right"},attrs:{span:16}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.sizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:e.dialogFormVisible,"before-close":e.cancle},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.user}},[null!=e.user.id?a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"username"}},[a("el-input",{attrs:{placeholder:"用户名","auto-complete":"off",disabled:!0},model:{value:e.user.username,callback:function(t){e.user.username=t},expression:"user.username"}})],1):a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{prop:"username","auto-complete":"off",placeholder:"用户名",disabled:!1},model:{value:e.user.username,callback:function(t){e.user.username=t},expression:"user.username"}})],1),e._v(" "),null==e.user.id?a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"密码","label-width":e.formLabelWidth,disabled:!1},model:{value:e.user.password,callback:function(t){e.user.password=t},expression:"user.password"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"手机号码","label-width":e.formLabelWidth,prop:"phone"}},[a("el-input",{attrs:{placeholder:"手机号码","auto-complete":"off"},model:{value:e.user.phone,callback:function(t){e.user.phone=t},expression:"user.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户昵称","label-width":e.formLabelWidth,prop:"nickname"}},[a("el-input",{attrs:{placeholder:"用户昵称","auto-complete":"off"},model:{value:e.user.nickname,callback:function(t){e.user.nickname=t},expression:"user.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门","label-width":e.formLabelWidth,prop:"department"}},[a("el-input",{attrs:{placeholder:"部门","auto-complete":"off"},model:{value:e.user.department,callback:function(t){e.user.department=t},expression:"user.department"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"职位","label-width":e.formLabelWidth,prop:"position"}},[a("el-input",{attrs:{placeholder:"职位","auto-complete":"off"},model:{value:e.user.position,callback:function(t){e.user.position=t},expression:"user.position"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色列表","label-width":e.formLabelWidth}},[a("el-checkbox-group",{model:{value:e.checkedroles,callback:function(t){e.checkedroles=t},expression:"checkedroles"}},e._l(e.roles,function(t){return a("el-checkbox",{key:t,attrs:{label:t.id,disabled:1==e.user.id&&1==t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"用户说明","label-width":e.formLabelWidth,prop:"note"}},[a("el-input",{attrs:{placeholder:"用户说明","auto-complete":"off"},model:{value:e.user.note,callback:function(t){e.user.note=t},expression:"user.note"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[null!=e.user.id?a("el-button",{staticStyle:{float:"left","border-bottom":"2px solid cornflowerblue"},attrs:{type:"text"},on:{click:function(t){e.resetPassword=!0}}},[e._v("重置用户密码?\n      ")]):e._e(),e._v(" "),a("el-button",{on:{click:function(t){e.cancle()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple-dark",attrs:{align:"right"}},[a("el-dialog",{ref:"resetForm",attrs:{visible:e.resetPassword,size:"tiny",top:"30%",title:"重置密码"},on:{"update:visible":function(t){e.resetPassword=t}}},[a("el-form",{ref:"reset",attrs:{model:e.reset,rules:e.resetRule}},[a("el-form-item",{attrs:{label:"新密码",prop:"pass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码"},model:{value:e.reset.pass,callback:function(t){e.reset.pass=t},expression:"reset.pass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请再次输入密码"},model:{value:e.reset.checkPass,callback:function(t){e.reset.checkPass=t},expression:"reset.checkPass"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.restPassCancle()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm1("reset")}}},[e._v("确 定")])],1)],1)],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=8.516742f03a51efef9e94.js.map