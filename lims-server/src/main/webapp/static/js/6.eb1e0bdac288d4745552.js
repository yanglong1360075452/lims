webpackJsonp([6],{327:function(e,t,i){function o(e){i(436)}var n=i(4)(i(406),i(460),o,null,null);e.exports=n.exports},338:function(e,t,i){e.exports={default:i(340),__esModule:!0}},339:function(e,t,i){"use strict";t.__esModule=!0;var o=i(338),n=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=function(e,t,i){return t in e?(0,n.default)(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},340:function(e,t,i){i(341);var o=i(9).Object;e.exports=function(e,t,i){return o.defineProperty(e,t,i)}},341:function(e,t,i){var o=i(26);o(o.S+o.F*!i(10),"Object",{defineProperty:i(11).f})},372:function(e,t,i){"use strict";var o=i(37);t.a={getPermissionsList:function(e){return i.i(o.a)({url:"/permission",params:e,method:"get"})},getList:function(e){return i.i(o.a)({url:"/permission",params:e,method:"get"})}}},406:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(339),n=i.n(o),a=i(110),l=i(372);t.default={props:{type:{type:Number,require:!0}},beforeCreate:function(){this.temp={},this.tableDataTemp={}},mounted:function(){this.getRoleList()},data:function(){var e;return e={totalCount:0,currentPage:1,pageSize:10,pageSizes:[10,20,30,40],checkAll:!1,dialogFormVisible:!1,visible2:!1,ifEdit:!1,ifTableEdit:!1,dialogType:1,seachSel:"",seachSelect:"",roleDataList:[],checkedroles:[],roles:[],permissions:[],ids:[],role:{id:null,name:null,description:null,permissions:null},checked:[],dialogFormData:{},listIndex:"",listQuery:{page:1,limit:10}},n()(e,"currentPage",1),n()(e,"defaultProps",{children:"children",label:"label"}),n()(e,"formLabelWidth","120px"),e},methods:{add:function(){this.dialogFormVisible=!0,this.getAppPermissions()},edit:function(e){if(this.dialogFormVisible=!0,this.getAppPermissions(),null!=e){this.role=e;for(var t=0;t<e.permissions.length;t++)this.checkedroles.push(e.permissions[t].id)}},deleteRole:function(){for(var e=this,t=this.roleDataList.filter(function(e){return e.checked}),i=0;i<t.length;i++)1==t[i].id?(e.getRoleList(),e.$message({type:"error",message:"管理员角色不能删除"})):a.a.deleteRole(t[i].id).then(function(t){e.getRoleList(),0==t.code?(e.$message({type:"success",message:"角色删除成功"}),e.getRoleList()):e.$message({type:"error",message:"角色删除失败"})})},getAppPermissions:function(){var e=this;l.a.getPermissionsList({page:1,length:1e3}).then(function(t){0==t.code&&(e.permissions=t.data.rows)})},handleCurrentChange:function(e){this.currentPage=e,this.getRoleList()},sizeChange:function(e){this.pageSize=e,this.getRoleList()},getRoleList:function(){var e=this;setTimeout(function(){var t=e;a.a.getRoleList({page:t.currentPage,length:t.pageSize}).then(function(e){0==e.code?(t.roleDataList=e.data.rows,t.totalPage=e.totalPage,t.totalCount=e.data.totalCount):t.$message({type:"error",message:e.reason})})},300)},submit:function(){var e=this;e.role.permissions=e.checkedroles,null==e.role.id?""!=e.role.name&&null!=e.role.name?a.a.create(e.role).then(function(t){0==t.code?(e.$message({type:"success",message:"创建角色成功"}),e.cancle(),e.getRoleList()):e.$message({type:"error",message:"创建角色失败"}),e.cancle(),e.getRoleList()}):e.$message({type:"error",message:"创建角色失败!请输入角色名"}):a.a.update(e.role).then(function(t){0==t.code?(e.$message({type:"success",message:"编辑角色成功"}),e.cancle(),e.getRoleList()):e.$message({type:"error",message:t.reason})})},cancle:function(){this.ifEdit=!1,this.dialogFormVisible=!1,this.role={name:null,description:null,permissions:null},this.checkedroles=[],this.getRoleList()},confirm:function(){this.ifEdit=!1},tableEdit:function(){this.ifTableEdit=!0},tableCancle:function(){this.ifTableEdit=!1},handleRemove:function(e,t){},changeState:function(){var e=this,t=this,i=this.checkAll;this.roleDataList.forEach(function(o){e.$set(o,"checked",i),o.checked=i,(o.checked=i)&&t.ids.push(o.id),console.log(o.checked+"*******"+o.id)})},singleSelect:function(){}},editCancle:function(){this.dialogFormData=this.tableDataTemp,console.log(this.dialogFormData,"this.dialogFormData"),this.dialogFormVisible=!1},editDo:function(){this.dialogFormVisible=!1},filters:{formatDate:function(e){var t=new Date(e);return parseTime(t,"{y}-{m}-{d}")}}}},420:function(e,t,i){t=e.exports=i(301)(!0),t.push([e.i,".seachpre{width:74px}.editWrapper{float:right}.editWrapper .edit{width:76px;padding:7px 15px;color:#5c7dfe;border:1px solid #5c7dfe}.filter-item{width:100px;height:36px;margin-left:20px;border:1px solid #5c7dfe;border-radius:4px!important}.buttonWrapper{font-size:12px;float:right}.buttonWrapper .cancle,.buttonWrapper .confirm{width:76px;padding:7px 15px}.buttonWrapper .confirm{color:#5c7dfe;border:1px solid #5c7dfe}.buttonWrapper .cancle{color:#f55f80;border:1px solid #f55f80}.tableEditWrapper{float:right}.tableEditWrapper .edit{width:102px;padding:8px 15px;font-size:13px;color:#5c7dfe;border:1px solid #5c7dfe}.tableEditWrapper .cancle{width:102px;padding:8px 15px;font-size:13px;color:#f55f80;border:1px solid #f55f80}.el-dialog__body .el-date-editor,.el-dialog__body .el-input{width:360px!important}.el-pagination{text-align:right;padding:10px 0;float:right}.el-pagination__total,.upload-demo{float:left}.upload-demo .el-button{color:#5c7dfe;border-radius:0;background:none;border:1px solid #5c7dfe}.loadTemplate{color:#2f3445;background:none;border:1px solid #c0ccda!important}.leftReset{padding-right:20px!important}.rightTitle{height:50px;padding:18px 0 18px 10px;line-height:50px;box-sizing:border-box;background-color:#eff2f7}.rightTitle .form-group-title{margin:0}.table{color:#2f3445;font-size:13px;border:1px solid #e0e6ed}.table .thead{background-color:#e5e9f2}.table .thead th{width:130px;height:44px;text-align:center;border-right:1px solid #e0e6ed}.table .tbody tr{height:46px;width:130px;text-align:center;border-top:1px solid #e0e6ed}.table .tbody tr td{border-right:1px solid #e0e6ed}.table .tbody tr .modifyTrData{color:#5c7dfe}","",{version:3,sources:["D:/idea_workspace/lims/lims-client/src/views/page/system/user/roles.vue"],names:[],mappings:"AACA,UACE,UAAY,CACb,AACD,aACE,WAAa,CACd,AACD,mBACI,WAAY,AACZ,iBAAkB,AAClB,cAAe,AACf,wBAA0B,CAC7B,AACD,aACE,YAAa,AACb,YAAa,AACb,iBAAkB,AAClB,yBAA0B,AAC1B,2BAA8B,CAC/B,AACD,eACE,eAAgB,AAChB,WAAa,CACd,AACD,+CAEI,WAAY,AACZ,gBAAkB,CACrB,AACD,wBACI,cAAe,AACf,wBAA0B,CAC7B,AACD,uBACI,cAAe,AACf,wBAA0B,CAC7B,AACD,kBACE,WAAa,CACd,AACD,wBACI,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,cAAe,AACf,wBAA0B,CAC7B,AACD,0BACI,YAAa,AACb,iBAAkB,AAClB,eAAgB,AAChB,cAAe,AACf,wBAA0B,CAC7B,AACD,4DAEE,qBAAwB,CACzB,AACD,eACE,iBAAkB,AAClB,eAAgB,AAChB,WAAa,CACd,AAID,mCACE,UAAY,CACb,AACD,wBACI,cAAe,AACf,gBAAmB,AACnB,gBAAiB,AACjB,wBAA0B,CAC7B,AACD,cACE,cAAe,AACf,gBAAiB,AACjB,kCAAqC,CACtC,AACD,WACE,4BAA+B,CAChC,AACD,YACE,YAAa,AACb,yBAA0B,AAC1B,iBAAkB,AAClB,sBAAuB,AACvB,wBAA0B,CAC3B,AACD,8BACI,QAAU,CACb,AACD,OACE,cAAe,AACf,eAAgB,AAChB,wBAA0B,CAC3B,AACD,cACI,wBAA0B,CAC7B,AACD,iBACM,YAAa,AACb,YAAa,AACb,kBAAmB,AACnB,8BAAgC,CACrC,AACD,iBACI,YAAa,AACb,YAAa,AACb,kBAAmB,AACnB,4BAA8B,CACjC,AACD,oBACM,8BAAgC,CACrC,AACD,+BACM,aAAe,CACpB",file:"roles.vue",sourcesContent:["\n.seachpre {\n  width: 74px;\n}\n.editWrapper {\n  float: right;\n}\n.editWrapper .edit {\n    width: 76px;\n    padding: 7px 15px;\n    color: #5c7dfe;\n    border: 1px solid #5c7dfe;\n}\n.filter-item {\n  width: 100px;\n  height: 36px;\n  margin-left: 20px;\n  border: 1px solid #5c7dfe;\n  border-radius: 4px !important;\n}\n.buttonWrapper {\n  font-size: 12px;\n  float: right;\n}\n.buttonWrapper .confirm,\n  .buttonWrapper .cancle {\n    width: 76px;\n    padding: 7px 15px;\n}\n.buttonWrapper .confirm {\n    color: #5c7dfe;\n    border: 1px solid #5c7dfe;\n}\n.buttonWrapper .cancle {\n    color: #f55f80;\n    border: 1px solid #f55f80;\n}\n.tableEditWrapper {\n  float: right;\n}\n.tableEditWrapper .edit {\n    width: 102px;\n    padding: 8px 15px;\n    font-size: 13px;\n    color: #5c7dfe;\n    border: 1px solid #5c7dfe;\n}\n.tableEditWrapper .cancle {\n    width: 102px;\n    padding: 8px 15px;\n    font-size: 13px;\n    color: #f55f80;\n    border: 1px solid #f55f80;\n}\n.el-dialog__body .el-input,\n.el-dialog__body .el-date-editor {\n  width: 360px !important;\n}\n.el-pagination {\n  text-align: right;\n  padding: 10px 0;\n  float: right;\n}\n.el-pagination__total {\n  float: left;\n}\n.upload-demo {\n  float: left;\n}\n.upload-demo .el-button {\n    color: #5c7dfe;\n    border-radius: 0px;\n    background: none;\n    border: 1px solid #5c7dfe;\n}\n.loadTemplate {\n  color: #2f3445;\n  background: none;\n  border: solid 1px #c0ccda !important;\n}\n.leftReset {\n  padding-right: 20px !important;\n}\n.rightTitle {\n  height: 50px;\n  padding: 18px 0 18px 10px;\n  line-height: 50px;\n  box-sizing: border-box;\n  background-color: #eff2f7;\n}\n.rightTitle .form-group-title {\n    margin: 0;\n}\n.table {\n  color: #2f3445;\n  font-size: 13px;\n  border: 1px solid #e0e6ed;\n}\n.table .thead {\n    background-color: #e5e9f2;\n}\n.table .thead th {\n      width: 130px;\n      height: 44px;\n      text-align: center;\n      border-right: 1px solid #e0e6ed;\n}\n.table .tbody tr {\n    height: 46px;\n    width: 130px;\n    text-align: center;\n    border-top: 1px solid #e0e6ed;\n}\n.table .tbody tr td {\n      border-right: 1px solid #e0e6ed;\n}\n.table .tbody tr .modifyTrData {\n      color: #5c7dfe;\n}\n"],sourceRoot:""}])},436:function(e,t,i){var o=i(420);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);i(302)("b4676a72",o,!0)},460:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8,offset:12}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.ifTableEdit,expression:"!ifTableEdit"}],staticClass:"tableEditWrapper"},[i("el-button",{staticClass:"edit",attrs:{icon:"edit"},nativeOn:{click:function(t){e.tableEdit()}}},[e._v("编辑")])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}],staticClass:"tableEditWrapper"},[i("el-button",{staticClass:"cancle",attrs:{icon:"edit"},nativeOn:{click:function(t){e.tableCancle()}}},[e._v("退出编辑")])],1)]),e._v(" "),i("el-col",{staticClass:"leftReset",attrs:{span:19}},[i("el-form",{ref:"form",attrs:{"label-position":"right","label-width":"120px"}},[i("el-row",{attrs:{type:"flex",align:"middle"}},[i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}],attrs:{span:14,offset:2}},[i("el-button-group",{staticStyle:{float:"right"}},[i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"edit"},on:{click:function(t){e.add()}}},[e._v("新建角色")])],1)],1)],1),e._v(" "),i("table",{staticClass:"table"},[i("thead",{staticClass:"thead"},[i("tr",[i("th",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}]},[i("el-checkbox",{on:{change:function(t){e.changeState()}},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}})],1),e._v(" "),i("th",[e._v("角色名")]),e._v(" "),i("th",[e._v("角色描述")]),e._v(" "),i("th",[e._v("权限列表")]),e._v(" "),i("th",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}]},[e._v("操作")])])]),e._v(" "),i("tbody",{staticClass:"tbody"},e._l(e.roleDataList,function(t,o){return i("tr",[i("td",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}]},[i("el-checkbox",{on:{change:function(t){e.singleSelect()}},model:{value:t.checked,callback:function(e){t.checked=e},expression:"item.checked"}})],1),e._v(" "),i("td",[e._v(e._s(t.name))]),e._v(" "),i("td",[e._v(e._s(t.description))]),e._v(" "),i("td",e._l(t.permissions,function(t){return i("span",[e._v(e._s(t.name)+" ")])})),e._v(" "),i("td",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}],staticClass:"modifyTrData",on:{click:function(i){e.edit(t)}}},[i("el-button",[e._v("修改")])],1)])}))]),e._v(" "),i("el-row",{staticStyle:{"margin-top":"20px"},attrs:{type:"fix",align:"middle"}},[i("el-col",{attrs:{span:8}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.ifTableEdit,expression:"ifTableEdit"}],on:{click:e.deleteRole}},[e._v("删除")])],1),e._v(" "),i("el-col",{staticStyle:{float:"right"},attrs:{span:16}},[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.sizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"添加角色",visible:e.dialogFormVisible,"before-close":e.cancle},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.role}},[1==e.role.id?i("el-form-item",{attrs:{label:"角色名","label-width":e.formLabelWidth,prop:"name"}},[i("el-input",{attrs:{placeholder:"角色名","auto-complete":"off",disabled:!0},model:{value:e.role.name,callback:function(t){e.role.name=t},expression:"role.name"}})],1):i("el-form-item",{attrs:{label:"角色名","label-width":e.formLabelWidth}},[i("el-input",{attrs:{prop:"name","auto-complete":"off",placeholder:"角色名",disabled:!1},model:{value:e.role.name,callback:function(t){e.role.name=t},expression:"role.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色描述","label-width":e.formLabelWidth}},[i("el-input",{attrs:{placeholder:"角色描述","label-width":e.formLabelWidth,disabled:!1},model:{value:e.role.description,callback:function(t){e.role.description=t},expression:"role.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权限列表","label-width":e.formLabelWidth}},[i("el-checkbox-group",{model:{value:e.checkedroles,callback:function(t){e.checkedroles=t},expression:"checkedroles"}},e._l(e.permissions,function(t){return i("el-checkbox",{key:t,attrs:{label:t.id,disabled:1==e.role.id&&1==t.id}},[e._v(e._s(t.name))])}))],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.cancle()}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=6.eb1e0bdac288d4745552.js.map